<?php
/**
 * This file is part of OPUS. The software OPUS has been originally developed
 * at the University of Stuttgart with funding from the German Research Net,
 * the Federal Department of Higher Education and Research and the Ministry
 * of Science, Research and the Arts of the State of Baden-Wuerttemberg.
 *
 * OPUS 4 is a complete rewrite of the original OPUS software and was developed
 * by the Stuttgart University Library, the Library Service Center
 * Baden-Wuerttemberg, the Cooperative Library Network Berlin-Brandenburg,
 * the Saarland University and State Library, the Saxon State Library -
 * Dresden State and University Library, the Bielefeld University Library and
 * the University Library of Hamburg University of Technology with funding from
 * the German Research Foundation and the European Regional Development Fund.
 *
 * LICENCE
 * OPUS is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the Licence, or any later version.
 * OPUS is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details. You should have received a copy of the GNU General Public License
 * along with OPUS; if not, write to the Free Software Foundation, Inc., 51
 * Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 *
 * @category    Application
 * @package     Module_Frontdoor
 * @author      Wolfgang Filter (wolfgang.filter@ub.uni-stuttgart.de)
 * @copyright   Copyright (c) 2008, OPUS 4 development team
 * @license     http://www.gnu.org/licenses/gpl.html General Public License
 * @version     $Id$
 *
 *
 *
 * This view gets a filtered one-dimensional associative array ($mydoc_data) from
 * the Frontdoor-Controller and displays it. The order of elements is fixed here.
 * Abstracts and keywords were combined with language information and displayed directly.
 * Every metadate is checked for multiplicity.
 *
 *
 *
 */
?>
<h1><?= $this-> translate('frontdoor_pagetitle') ?></h1><hr /><br />
<? if (is_array($this->mydoc_data) === true)
   {
      if (array_key_exists ('IdentifierUrn_0_Value', $this->mydoc_data) &&
         ($this->urnNumber > 1))
      {?>
         <?= $this-> translate('frontdoor_entry'); ?><br /><?
         for ($i = 0; $i < $this->urnNumber; $i++)
         {
            $j = $i + 1;
            if (array_key_exists ('IdentifierUrn_' .$i. '_Value', $this->mydoc_data) === true)
            {
               $value = $this->mydoc_data['IdentifierUrn_' .$i. '_Value'];?>

               <b><?= $this-> translate ('IdentifierUrn'). ' ('. $j. ')';?>: </b>
               <a href="<?= $this->value = 'http://nbn-resolving.de/urn/resolver.pl?' .$value;?>">
               <?= $this->value = $value;?></a><br /><?
             }
          }?><br /><hr /><?
       }
       elseif (array_key_exists ('IdentifierUrn_0_Value', $this->mydoc_data) &&
              ($this->urnNumber = 1))
       {
           $value = $this->mydoc_data['IdentifierUrn_0_Value'];?>
           <?= $this-> translate('frontdoor_entry'); ?><br />
           <b><?= $this-> translate ('IdentifierUrn');?>: </b>
           <a href="<?= $this->value = 'http://nbn-resolving.de/urn/resolver.pl?' .$value;?>">
           <?= $this->value = $value;?></a><br /><br /><hr /><?
       }
       elseif (array_key_exists ('IdentifierUrn_Value', $this->mydoc_data) === true)
       {
           $value = $this->mydoc_data['IdentifierUrn_Value'];?>
           <?= $this-> translate('frontdoor_entry'); ?><br />
           <b><?= $this-> translate ('IdentifierUrn');?>: </b>
           <a href="<?= $this->value = 'http://nbn-resolving.de/urn/resolver.pl?' .$value;?>">
           <?= $this->value = $value;?></a><br /><br /><hr /><?
       }

       if (isset($this->collectionPathes) === true && is_array($this->collectionPathes) === true) {
           //display collection path (i.e. DDC)
           foreach ($this->collectionPathes as $collPath)
           {
              echo $collPath . "<br /><br />\n";
           }
       }

      //displaying TitleMain (case multiple)
      if (array_key_exists ('TitleMain_0_Value', $this->mydoc_data) === true)
      {
          for ($i = 0; $i < $this->titleNumber; $i++)
          {
             if (array_key_exists ('TitleMain_'.$i.'_Value', $this->mydoc_data) === true)
             {
                $value = $this->mydoc_data['TitleMain_'.$i.'_Value'];?>
                <p><h2><?= $this->value = $value;?></h2></p><?
             }
          }
      }
      // TitleMain ( case not multiple)
      elseif (array_key_exists ('TitleMain_Value', $this->mydoc_data) === true)
      {
          $value = $this->mydoc_data['TitleMain_Value'];?>
          <p><h2><?= $this->value = $value;?></h2></p><?
      }

      //PersonAuthor (case multiple)
      if (array_key_exists ('PersonAuthor_0_Name', $this->mydoc_data) === true)
      {
          for ($i = 0; $i < $this->authorNumber; $i++)
          {
             if (array_key_exists ('PersonAuthor_'.$i.'_Name', $this->mydoc_data) === true)
             {
                if (array_key_exists ('PersonAuthor_'. $i. '_Email', $this->mydoc_data) &&
                array_key_exists ('PersonAuthor_'. $i. '_AllowEmailContact', $this->mydoc_data) === true)
                {
                   $value = $this->mydoc_data['PersonAuthor_'.$i.'_Name'];?>
                   <p><b><a href="<?= $this->value = $this->url(array(
                   'module' => 'search',
                   'controller' => 'search',
                   'action' => 'metadatasearch',
                   'author' => $value,
                   ), null, true);?>">
                   <?= $this->value = $value;?></a></b>&nbsp;
                   <a href="<?= $this->value = $this->url(array(
                   'module' => 'frontdoor',
                   'controller' => 'contactmail',
                   'docId' => $this->docId,
                    ), null, true);?>">
                    <img src = "<?= $this->value =
                    $this->layoutPath .'/img/email_logo.gif';?>" border = '0' width = '23' height = '23' title = '<?= $this->translate('frontdoor_contacttitle')?>'</a></p><br /><?
                }
                else
                {
                   $value = $this->mydoc_data['PersonAuthor_'.$i.'_Name'];?>
                   <p><b><a href="<?= $this->value = $this->url(array(
                   'controller' => 'search',
                   'module'=> 'search',
                   'action' => 'metadatasearch',
                   'author' => $value,
                   ), null, true);?>">
                   <?= $this->value = $value?></a></b></p><br /><?
                }
            }
         }
      }
      //PersonAuthor (Case not multiple)
      elseif (array_key_exists ('PersonAuthor_Name', $this->mydoc_data) === true)
      {
         if (array_key_exists ('PersonAuthor_Email', $this->mydoc_data) &&
         array_key_exists ('PersonAuthor_Allow_EmailContact') === true)
         {
            $value = $this->mydoc_data['PersonAuthor_Name'];?>
            <p><b><a href="<?= $this->value = $this->url(array(
            'module' => 'search',
            'controller' => 'search',
            'action' => 'metadatasearch',
            'author' => $value,
            ), null, true);?>">
            <?= $this->value = $value;?></a></b>&nbsp;
            <a href="<?= $this->value = $this->url(array(
             'module' => 'frontdoor',
             'controller' => 'contactmail',
             'docId' => $this->docId,
             ), null, true);?>">
             <img src = "<?= $this->value =
             $this->layoutPath .'/img/email_logo.gif';?>" border = '0' width = '23' height = '23' title = '<?= $this->translate('frontdoor_contacttitle')?>'</a></p><br /><?
         }
         else
         {
            $value = $this->mydoc_data['PersonAuthor_Name'];?>
            <p><b><a href="<?= $this->value = $this->url(array(
            'module' => 'search',
            'controller' => 'search',
            'action' => 'metadatasearch',
            'author' => $value,
            ), null, true);?>">
            <?= $this->value = $value;?></a></b></p><?
          }
      }

       // getting filetype-logos depending on filetype
       if ($this->fileNumber !== 0)
       {?>
          <p><b><?= $this-> translate('File(s)')?>:</b><?
          for ($i = 0; $i < $this->fileNumber; $i++)
          {
             if (array_key_exists ('File_'.$i. '_PathName', $this->mydoc_data) === true)
             {
                $path_name = $this->mydoc_data['File_' .$i. '_PathName'];
                $file_type = substr(strchr($path_name, '.'), 1);
                if (array_key_exists ('File_'.$i. '_FileSize', $this->mydoc_data) === true)
                {
                   $file_size = $this->mydoc_data['File_' .$i. '_FileSize']/1000;
                   if (file_exists ('./layouts/' .$this->theme. '/img/filetypelogo_' .$file_type. '.png'))
                   {?>
                      <a href="<?= $this->value = '/documents/'.$this->docId.'/'.$this->path_name = $path_name;?>">
                      <img src = "<?= $this->value = $this->layoutPath . '/img/filetypelogo_' .$file_type. '.png';?>"
                      title = 'Download' border = '0'<?= $this->value = '-' .$path_name?>'>
                      (<?= $this->file_type = $file_type. ', ' .$this->file_size = $file_size. ' kB'?>)</a>&nbsp;&nbsp;&nbsp;<?
                   }
                   else
                   {?>
                      <a href="<?= $this->value = '/documents/'.$this->docId.'/'.$this->path_name = $path_name;?>">
                      <img src = "<?= $this->value = $this->layoutPath . '/img/filetypelogo_default.png';?>"
                      title = 'Download' border = '0'<?= $this->value = '-' .$path_name?>'>
                      (<?= $this->file_type = $file_type. ', ' .$this->file_size = $file_size?>)</a>&nbsp;&nbsp;&nbsp;<?
                   }
                }
                else
                {
                   if (file_exists ('./layouts/' .$this->theme. '/img/filetypelogo_' .$file_type. '.png'))
                   {?>
                      <a href="<?= $this->value = '/documents/'.$this->docId.'/'.$this->path_name = $path_name;?>">
                      <img src = "<?= $this->value = $this->layoutPath . '/img/filetypelogo_' .$file_type. '.png';?>"
                      title = 'Download' border = '0'<?= $this->value = '-' .$path_name?>'>
                      (<?= $this->file_type = $file_type?>)</a>&nbsp;&nbsp;&nbsp;<?
                   }
                   else
                   {?>
                      <a href="<?= $this->value = '/documents/'.$this->docId.'/'.$this->path_name = $path_name;?>">
                      <img src = "<?= $this->value = $this->layoutPath . '/img/filetypelogo_default.png';?>"
                      title = 'Download' border = '0'<?= $this->value = '-' .$path_name?>'>
                      (<?= $this->file_type = $file_type?>)</a>&nbsp;&nbsp;&nbsp;<?
                   }
                }
             }
             else
             {
             if (file_exists ('./layouts/' .$this->theme. '/img/filetypelogo_' .$file_type. '.png'))
             {?>
                <a href="<?= $this->value = '/documents/'.$this->docId.'/'.$this->path_name = $path_name;?>">
                <img src = "<?= $this->value = $this->layoutPath . '/img/filetypelogo_' .$file_type. '.png';?>"
                title = 'Download' border = '0'<?= $this->value = '-' .$path_name?>'>
                (<?= $this->file_type = $file_type?>)</a>&nbsp;&nbsp;&nbsp;<?
             }
             else
             {?>
                <a href="<?= $this->value = '/documents/'.$this->docId.'/'.$this->path_name = $path_name;?>">
                <img src = "<?= $this->value = $this->layoutPath . '/img/filetypelogo_default.png';?>"
                title = 'Download' border = '0'<?= $this->value = '-' .$path_name?>'>
                (<?= $this->file_type = $file_type?>)</a>&nbsp;&nbsp;&nbsp;<?
             }
          }
       }
    }

          //offering internal and external services
          ?></p>
          <p><br /><a href="<?= $this->value =
          $this->url(array(
             'module' => 'frontdoor',
             'controller' => 'hash',
             'docId' => $this->docId,
          ), null, true);?>">
          <img src = "<?= $this->value = $this->layoutPath . '/img/unversehrt.jpg';?>" border = '0' title = '<?= $this->translate('frontdoor_integrity')?>'</a>

          <a href="<?= $this->value =
          $this->url(array(
          'module' => 'frontdoor',
          'controller' => 'mail',
          'action' => 'index',
          'docId' => $this->docId,
          ), null, true);?>">
          <img src = "<?= $this->value = $this->layoutPath . '/img/hand.jpg';?>" border = '0' title = '<?= $this->translate('frontdoor_recommendationtitle')?>'</a>

          <a href="<?= $this->value =
          $this->url(array(
             'module' => 'statistic',
             'controller' => 'index',
             'action' => 'index',
             'docId' => $this->docId,
          ), null, true);?>">
          <img src = "<?= $this->value =
          $this->url(array(
             'module' => 'statistic',
             'controller' => 'graph',
             'action' => 'thumb',
             'id' => $this->docId,)); ?>" border = '0' title = '<?= $this->translate('frontdoor_statistics')?>'</a>

          <a href="<?= $this->value =
          $this->url(array(
             'module' => 'socialBookmarking',
             'controller' => 'connotea',
             'docId' => $this->docId,
          ), null, true);?>">
          <img src = "<?= $this->value =
          $this->layoutPath .'/img/connotea_icon.jpg';?>" border = '0' title = '<?= $this->translate('frontdoor_bookmarkconnotea')?>'</a>

          <a href="<?= $this->value =
          $this->url(array(
             'module' => 'socialBookmarking',
             'controller' => 'delicious',
             'docId' => $this->docId,
          ), null, true);?>">
          <img src = "<?= $this->value =
          $this->layoutPath . '/img/delicious.jpg';?>" border = '0' title = '<?= $this->translate('frontdoor_bookmarkdelicious')?>'</a><?

          if (array_key_exists ('TitleMain_0_Value', $this->mydoc_data) === true)
          {?>
             <a href="<?= $this->value =
             'http://scholar.google.de/scholar?hl=de&q=' .$this->mydoc_data['TitleMain_0_Value'];?>">
             <img src = "<?= $this->value =
             $this->layoutPath . '/img/google_scholar.jpg';?>" border = '0' title = '<?= $this->translate('frontdoor_searchgoogle')?>'</a><?
          }?>

          <a href="<?= $this->value = '';?>">
          <img src = "<?= $this->value =
          $this->layoutPath . '/img/bibtex.jpg';?>" border = '0' title = '<?= $this->translate('frontdoor_exportbibtex')?>'</a>

          <a href="<?= $this->value = '';?>">
          <img src = "<?= $this->value = $this->layoutPath . '/img/ris.jpg';?>" border = '0' title = '<?= $this->translate('frontdoor_exportris')?>'></a></p><br /><?

            //displaying other metadata
            if (array_key_exists('Type_0', $this->mydoc_data) &&
               ($this->typeNumber > 1))
            {
               for ($i = 0; $i < $this->typeNumber; $i++)
               {
                  $j = $i+1;
                  if (array_key_exists('Type_' .$i, $this->mydoc_data))
                  {
                     $value = $this->mydoc_data['Type_' .$i];?>
                     <p><b><?= $this-> translate('Type'). '  ('. $j. ')'?>: </b>
                     <?= $this->value = $value;?></p><?
                  }
               }
            }
            elseif (array_key_exists ('Type_0', $this->mydoc_data) &&
                   ($this->typeNumber = 1))
            {
               $value = $this->mydoc_data['Type'];?>
               <p><b><?= $this-> translate('Type')?>: </b>
               <?= $this->value = $value;?></p><?
            }
            elseif (array_key_exists ('Type', $this->mydoc_data) === true)
            {
               $value = $this->mydoc_data['Type'];?>
               <p><b><?= $this-> translate('Type')?>: </b>
               <?= $this->value = $value;?></p><?
            }

            if (array_key_exists ('Language_0', $this->mydoc_data) &&
               ($this->languageNumber > 1))
            {
               for ($i = 0; $i < $this->languageNumber; $i++)
               {
                  $j = $i +1;
                  if (array_key_exists('Language_' .$i, $this->mydoc_data) === true)
                  {
                     $this->value = $value = $this->mydoc_data['Language_' .$i];?>
                     <p><b><?= $this-> translate('Language'). ' ('. $j. ')'?>: </b>
                     <?= $this->translate($value);?></p><?
                  }
               }
            }
            elseif (array_key_exists ('Language_0', $this->mydoc_data) &&
                   ($this->languageNumber = 1))
            {
               $this->value = $value = $this->mydoc_data['Language_0'];?>
               <p><b><?= $this-> translate('Language')?>: </b>
               <?= $this->translate($value);?></p><?
            }
            elseif (array_key_exists ('Language', $this->mydoc_data))
            {
               $this->value = $value = $this->mydoc_data['Language'];?>
               <p><b><?= $this-> translate('Language')?>: </b>
               <?= $this->translate($value);?></p><?
            }

            if (array_key_exists ('TitleParent_0_Value', $this->mydoc_data) &&
               ($this->titleParentNumber > 1))
            {
               for ($i = 0; $i < $this->titleparentNumber; $i++)
               {
                  $j = $i +1;
                  if (array_key_exists ('TitleParent_'.$i.'_Value', $this->mydoc_data) === true)
                  {
                     $value = $this->mydoc_data['TitleParent_'.$j.'_Value'];?>
                     <p><b><?= $this-> translate('TitleParent'). ' ('. $j. ')'?>: </b>
                     <?= $this->value = $value;?></p><?
                  }
               }
            }
            elseif (array_key_exists ('TitleParent_0_Value', $this->mydoc_data) &&
                   ($this->titleParentNumber = 1))
            {
               $value = $this->mydoc_data['TitleParent_0_Value'];?>
               <p><b><?= $this-> translate('TitleParent')?>: </b>
               <?= $this->value = $value;?></p><?
            }
            elseif (array_key_exists ('TitleParent_Value', $this->mydoc_data) === true)
            {
               $value = $this->mydoc_data['TitleParent_Value'];?>

               <p><b><?= $this-> translate('TitleParent')?>: </b>
               <?= $this->value = $value;?>></p><?
            }


            if (array_key_exists ('SubjectSwd_0_Value', $this->mydoc_data) === true)
            {
                for ($i = 0; $i < $this->swdNumber; $i++)
                {
                   if (array_key_exists ('SubjectSwd_'.$i.'_Value', $this->mydoc_data) === true)
                   {
                      if (array_key_exists ('SubjectSwd_'.$i.'_Language', $this->mydoc_data) === true)
                      {
                         $this->value = $value = $this->mydoc_data['SubjectSwd_'.$i.'_Value'];
                         $this->lang = $lang = $this->mydoc_data['SubjectSwd_'.$i.'_Language'];?>
                         <p><b><?= $this->translate('SubjectSwdValue') .' ('. $this->translate($lang). ')';?>: </b>
                         <?= $this->value = $value;?></p><?
                      }
                      else
                      {
                         $this->value = $value = $this->mydoc_data['SubjectSwd_'.$i.'_Value'];?>
                         <p><b><?= $this->translate('SubjectSwdValue');?>: </b>
                         <?= $this->value = $value;?></p><?
                      }
                   }
                }
             }
             elseif (array_key_exists ('SubjectSwd_Value', $this->mydoc_data) === true)
             {
                if (array_key_exists ('SubjectSwd_Language', $this->mydoc_data) === true)
                {
                   $this->value = $value = $this->mydoc_data['SubjectSwd_Value'];
                   $this->lang = $lang = $this->mydoc_data['SubjectSwd_Language'];?>
                   <p><b><?= $this-> translate('SubjectSwdValue') .' ('. $this->translate($lang). ')';?>: </b>
                   <?= $this->value = $value;?></p><?
                }
                else
                {
                   $this->value = $value = $this->mydoc_data['SubjectSwd_Value'];?>
                   <p><b><?= $this-> translate('SubjectSwdValue');?>: </b>
                   <?= $this->value = $value;?></p><?
                }
             }

             if (array_key_exists ('SubjectUncontrolled_0_Value', $this->mydoc_data) === true)
             {
                for ($i = 0; $i < $this->uncontrolledNumber; $i++)
                {
                   if (array_key_exists ('SubjectUncontrolled_'.$i.'_Value', $this->mydoc_data) === true)
                   {
                      if (array_key_exists ('SubjectUncontrolled_'.$i.'_Language', $this->mydoc_data) === true)
                      {
                         $this->value = $value = $this->mydoc_data['SubjectUncontrolled_'.$i.'_Value'];
                         $this->lang = $lang = $this->mydoc_data['SubjectUncontrolled_'.$i.'_Language'];?>
                         <p><b><?= $this-> translate('SubjectUncontrolledValue') .' ('. $this->translate($lang). ')';?>: </b>
                         <?= $this->value = $value;?></p><?
                      }
                      else
                      {
                         $this->value = $value = $this->mydoc_data['SubjectUncontrolled_Value'];?>
                         <p><b><?= $this-> translate('SubjectUncontrolledValue');?>: </b>
                         <?= $this->value = $value;?></p><?
                      }
                   }
                 }
              }
              elseif (array_key_exists ('SubjectUncontrolled_Value', $this->mydoc_data) === true)
              {
                 if (array_key_exists ('SubjectUncontrolled_Language', $this->mydoc_data) === true)
                 {
                    $this->value = $value = $this->mydoc_data['SubjectUncontrolled_Value'];
                    $this->lang = $lang = $this->mydoc_data['SubjectUncontrolled_Language'];?>
                    <p><b><?= $this-> translate('SubjectUncontrolledValue') .' ('. $this->translate($lang). ')';?>: </b>
                    <?= $this->value = $value;?></p><?
                 }
                 else
                 {
                    $this->value = $value = $this->mydoc_data['SubjectUncontrolled_Value'];?>
                    <p><b><?= $this-> translate('SubjectUncontrolledValue');?>: </b>
                    <?= $this->value = $value;?></p><?
                 }
               }

               if (array_key_exists ('SubjectPsyndex_0_Value', $this->mydoc_data) === true)
               {
                  for ($i = 0; $i < $this->psyndexNumber; $i++)
                  {
                     if (array_key_exists ('SubjectPsyndex_'.$i.'_Value', $this->mydoc_data) === true)
                     {
                        if (array_key_exists ('SubjectPsyndex_'.$i.'_Language', $this->mydoc_data) === true)
                        {
                           $this->value = $value = $this->mydoc_data['SubjectPsyndex_'.$i.'_Value'];
                           $this->lang = $lang = $this->mydoc_data['SubjectPsyndex_'.$i.'_Language'];?>
                           <p><b><?= $this-> translate('SubjectPsyndexValue') .' ('. $this->translate($lang). ')';?>: </b>
                           <?= $this->value = $value;?></p><?
                        }
                        else
                        {
                           $this->value = $value = $this->mydoc_data['SubjectPsyndex_'.$i.'_Value'];?>
                           <p><b><?= $this-> translate('SubjectPsyndexValue');?>: </b>
                           <?= $this->value = $value;?></p><?
                        }
                     }
                  }
               }
               elseif (array_key_exists ('SubjectPsyndex_Value', $this->mydoc_data) === true)
               {
                  if(array_key_exists ('SubjectPsyndex_Language', $this->mydoc_data) == true)
                  {
                     $this->value = $value = $this->mydoc_data['SubjectPsyndex_Value'];
                     $this->lang = $lang = $this->mydoc_data['SubjectPsyndex_Language'];?>
                     <p><b><?= $this-> translate('SubjectPsyndexValue') .' ('. $this->translate($lang). ')';?>: </b>
                     <?= $this->value = $value;?></p><?
                  }
                  else
                  {
                     $this->value = $value = $this->mydoc_data['SubjectPsyndex_Value'];?>
                     <p><b><?= $this-> translate('SubjectPsyndexValue');?>: </b>
                     <?= $this->value = $value;?></p><?
                  }
               }

               if (array_key_exists ('PublishedYear_0', $this->mydoc_data) &&
                  ($this->publishedYearNumber > 1))
               {
                  for ($i = 0; $i < $this->publishedYearNumber; $i++)
                  {
                     $j = $i +1;
                     if (array_key_exists ('PublishedYear_' .$i, $this->mydoc_data) === true)
                     {
                        $value = $this->mydoc_data['PublishedYear_' .$i];
                     }?>
                     <p><b><?= $this->translate('PublishedYear') .' (' .$j. ')'?>:</b>
                     <?= $this->value = $value;?></p></b><?
                  }
               }
               elseif (array_key_exists ('PublishedYear_0', $this->mydoc_data) &&
                      ($this->publishedYearNumber = 1))
               {
                  $value = $this->mydoc_data['PublishedYear_0'];?>
                  <p><b><?= $this-> translate('PublishedYear')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PublishedYear', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['PublishedYear'];?>
                  <p><b><?= $this-> translate('PublishedYear')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PublishedDate_year_0', $this->mydoc_data) &&
                  (array_key_exists ('PublishedDate_month_0', $this->mydoc_data)) &&
                  (array_key_exists ('PublishedDate_day_0', $this->mydoc_data)) &&
                  ($this->publishedDateNumber > 1))
               {
                  for ($i = 0; $i<$this->publishedDateNumber; $i++)
                  {
                    $j = $i +1;
                    $year = $this->mydoc_data['PublishedDate_year_'. $i];
                    $month = $this->mydoc_data['PublishedDate_month_'. $i];
                    $day = $this->mydoc_data['PublishedDate_day_'. $i];?>
                    <p><b><?= $this-> translate('PublishedDate'). ' ('. $j. ')'?>: </b>
                    <?= $this->year = $year. '-' .$month. '-' .$day?></p><?
                  }
               }
               elseif (array_key_exists ('PublishedDate_year_0', $this->mydoc_data) &&
                      (array_key_exists ('PublishedDate_month_0', $this->mydoc_data)) &&
                      (array_key_exists ('PublishedDate_day_0', $this->mydoc_data)) &&
                      ($this->publishedDateNumber = 1))
               {
                  $year = $this->mydoc_data['PublishedDate_year_0'];
                  $month = $this->mydoc_data['PublishedDate_month_0'];
                  $day = $this->mydoc_data['PublishedDate_day_0'];?>
                  <p><b><?= $this-> translate('PublishedDate')?>: </b>
                  <?= $this->year = $year. '-' .$month. '-' .$day?></p><?
               }
               elseif (array_key_exists ('PublishedDate_year', $this->mydoc_data) &&
                      (array_key_exists ('PublishedDate_month', $this->mydoc_data)) &&
                      (array_key_exists ('PublishedDate_day', $this->mydoc_data)))
               {
                  $year = $this->mydoc_data['PublishedDate_year'];
                  $month = $this->mydoc_data['PublishedDate_month'];
                  $day = $this->mydoc_data['PublishedDate_day'];?>
                  <p><b><?= $this-> translate('PublishedDate')?>: </b>
                  <?= $this->year = $year. '-' .$month. '-' .$day?></p><?
               }

               if (array_key_exists ('IdentifierIsbn_0_Value', $this->mydoc_data) &&
                  ($this->isbnNumber > 1))
               {
                  for ($i=0; $i < $this->isbnNumber; $i++)
                  {
                     $j = $i + 1;
                     if (array_key_exists ('IdentifierIsbn_' .$i. '_Value', $this->mydoc_data) === true)
                     {
                        $value = $this->mydoc_data['IdentifierIsbn_' .$i. '_Value'];?>
                        <p><b><?= $this-> translate('IdentifierIsbn'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('IdentifierIsbn_0_Value', $this->mydoc_data) &&
                      ($this->isbnNumber = 1))
               {
                  $this->value = $value = $this->mydoc_data['IdentifierIsbn_0_Value'];?>
                  <p><b><?= $this-> translate('IdentifierIsbn')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('IdentifierIsbn_Value', $this->mydoc_data))
               {
                  $this->value = $value = $this->mydoc_data['IdentifierIsbn_Value'];?>
                  <p><b><?= $this-> translate('IdentifierIsbn')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PageNumber_0', $this->mydoc_data) &&
                  ($this->pageNumberNumber > 1))
               {
                  for ($i = 0; $i < $this->pageNumberNumber; $i++)
                  {
                     $j = $i + 1;
                     if (array_key_exists ('PageNumber_'.$i, $this->mydoc_data) === true)
                     {
                        $value = $this->mydoc_data['PageNumber_' .$i];?>
                        <p><b><?= $this->translate ('PageNumber'). ' ('. $j. ')';?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('PageNumber_0', $this->mydoc_data) &&
                      ($this->pageNumberNumber = 1))
               {
                  $value = $this->mydoc_data['PageNumber_0'];?>
                  <p><b><?= $this->translate ('PageNumber');?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PageNumber', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['PageNumber'];?>
                  <p><b><?= $this->translate ('PageNumber');?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PageFirst_0', $this->mydoc_data) &&
                  (array_key_exists ('PageLast_0', $this->mydoc_data)) &&
                  ($this->firstPageNumber > 1))
               {
                  for ($i = 0; $i < $this->firstPageNumber; $i++)
                  {
                     $j = $i + 1;
                     if (array_key_exists ('FirstPage_'.$i, $this->mydoc_data) === true)
                     {
                       $firstpage = $this->mydoc_data['FirstPage_' .$i];
                       $lastPage = $this->mydoc_data['LastPage_' .$i];?>
                       <p><b><?= $this->translate('Pages_from_to'). ' ('.$j. ')';?>:</b></p>
                       <?= $this->firstpage = $firstpage. '-' .$lastpage;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('PageFirst_0', $this->mydoc_data) &&
                      (array_key_exists ('PageLast_0', $this->mydoc_data)) &&
                      ($this->firstPageNumber = 1))
               {
                  $firstpage = $this->mydoc_data['PageFirst_0'];
                  $lastPage = $this->mydoc_data['PageLast_0'];?>
                  <p><b><?= $this->translate('Pages_from_to');?>:</b>
                  <?= $this->firstpage = $firstpage. '-' .$lastPage;?></p><?
               }
               elseif (array_key_exists ('PageFirst', $this->mydoc_data) &&
                      (array_key_exists ('PageLast', $this->mydoc_data)))
               {
                  $firstpage = $this->mydoc_data['PageFirst'];
                  $lastPage = $this->mydoc_data['PageLast'];?>
                  <p><b><?= $this->translate('Pages_from_to');?>:</b>
                  <?= $this->firstpage = $firstpage. '-' .$lastPage;?></p><?
               }

               if (array_key_exists ('Edition_0', $this->mydoc_data) &&
                  ($this->editionNumber > 1))
               {
                  $j = $i + 1;
                  for ($i = 0; $i < $this->editionNumber; $i++)
                  {
                     if (array_key_exists ('Edition_'.$i, $this->mydoc_data)  === true)
                     {
                        $value = $this->mydoc_data['Edition_' .$i];?>
                        <p><b><?= $this-> translate('Edition'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('Edition_0', $this->mydoc_data) &&
                      ($this->editionNumber = 1))
               {
                  $value = $this->mydoc_data['Edition_0'];?>
                  <p><b><?= $this-> translate('Edition')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('Edition', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['Edition'];?>
                  <p><b><?= $this-> translate('Edition')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('Issue_0', $this->mydoc_data) &&
                  ($this->issueNumber > 1))
               {
                  $j = $i + 1;
                  for ($i = 0; $i < $this->issueNumber; $i++)
                  {
                     if (array_key_exists ('Issue_'.$i, $this->mydoc_data)  === true)
                     {
                        $value = $this->mydoc_data['Issue_' .$i];?>
                        <p><b><?= $this-> translate('Issue'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('Issue_0', $this->mydoc_data) &&
                      ($this->mydoc_data = 1))
               {
                  $value = $this->mydoc_data['Issue_0'];?>
                  <p><b><?= $this-> translate('Issue')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('Issue', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['Issue'];?>
                  <p><b><?= $this-> translate('Issue')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('CreatingCorporation_0', $this->mydoc_data) &&
                  ($this->creatingCorporationNumber > 1))
               {
                  for ($i = 0; $i < $this->creatingCorporationNumber; $i++)
                  {
                     $j = $i + 1;
                     if (array_key_exists ('CreatingCorporation_'.$i, $this->mydoc_data)  === true)
                     {
                        $value = $this->mydoc_data['CreatingCorporation_' .$i];?>
                        <p><b><?= $this-> translate('CreatingCorporation'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('CreatingCorporation_0', $this->mydoc_data) &&
                      ($this->creatingCorporationNumber = 1))
               {
                  $value = $this->mydoc_data['CreatingCorporation_0'];?>
                  <p><b><?= $this-> translate('CreatingCorporation')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('CreatingCorporation', $this->mydoc_data) == true)
               {
                  $value = $this->mydoc_data['CreatingCorporation'];?>
                  <p><b><?= $this-> translate('CreatingCorporation')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('ContributingCorporation_0', $this->mydoc_data) &&
                  ($this->contributingCorporationNumber  > 1))
               {
                  for ($i = 0; $i < $this->contributingCorporationNumber; $i++)
                  {
                     $j = $i +1;
                     if (array_key_exists ('ContributingCorporation_'.$i, $this->mydoc_data)  === true)
                     {
                        $value = $this->mydoc_data['ContributingCorporation_' .$i];?>
                        <p><b><?= $this-> translate('ContributingCorporation'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('ContributingCorporation_0', $this->mydoc_data) &&
                      ($this->contributingCorporationNumber = 1))
               {
                  $value = $this->mydoc_data['ContributingCorporation_0'];?>
                  <p><b><?= $this-> translate('ContributingCorporation')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('ContributingCorporation', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['ContributingCorporation'];?>
                  <p><b><?= $this-> translate('ContributingCorporation')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('NonInstituteAffiliation_0', $this->mydoc_data) &&
                  ($this->nonInstituteAffiliationNumber > 1))
               {
                  for ($i = 0; $i < $this->nonInstituteAffiliationNumber; $i++)
                  {
                     $j = $i + 1;
                     if (array_key_exists ('NonInstituteAffiliation_'.$i, $this->mydoc_data)  === true)
                     {
                        $value = $this->mydoc_data['NonInstituteAffiliation_' .$i];?>
                        <p><b><?= $this-> translate('NonInstituteAffiliation'). ' )'. $j. ')' ?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('NonInstituteAffiliation_0', $this->mydoc_data) &&
                      ($this->nonInstituteAffiliationNumber = 1))
               {
                  $value = $this->mydoc_data['NonInstituteAffiliation_0'];?>
                  <p><b><?= $this-> translate('NonInstituteAffiliation')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('NonInstituteAffiliation', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['NonInstituteAffiliation'];?>
                  <p><b><?= $this-> translate('NonInstituteAffiliation')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PublisherUniversity_0', $this->mydoc_data) &&
                  ($this->publisherUniversityNumber > 1))
               {
                  for ($i = 0; $i < $this->publisherUniversityNumber; $i++)
                  {
                     $j = $i + 1;
                     if (array_key_exists ('PublisherUniversity_'.$i, $this->mydoc_data)  === true)
                     {
                        $value = $this->mydoc_data['PublisherUniversity_' .$i];?>
                        <p><b><?= $this-> translate('PublisherUniversity'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('PublisherUniversity_0', $this->mydoc_data) &&
                      ($this->publisherUniversityNumber = 1))
               {
                  $value = $this->mydoc_data['PublisherUniversity_0'];?>
                  <p><b><?= $this-> translate('PublisherUniversity')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PublisherUniversity', $this->mydoc_data) == true)
               {
                  $value = $this->mydoc_data['PublisherUniversity'];?>
                  <p><b><?= $this-> translate('PublisherUniversity')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PersonContributor_0_Name', $this->mydoc_data) &&
                  ($this->contributorNumber >1))
               {
                  for ($i = 0; $i < $this->contributorNumber; $i++)
                  {
                     $j = $i + 1;
                     if (array_key_exists ('PersonContributor_'.$i.'_Name', $this->mydoc_data) === true)
                     {
                        $value = $this->mydoc_data['PersonContributor_'.$i.'_Name'];?>
                        <p><b><?= $this-> translate('PersonContributor'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                     }
                  }
               }
               elseif (array_key_exists ('PersonContributor_0_Name', $this->mydoc_data) &&
                      ($this->contributorNumber = 1))
               {
                  $value = $this->mydoc_data['PersonContributor_0_Name'];?>
                  <p><b><?= $this-> translate('PersonContributor')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PersonContributorName', $this->mydoc_data))
               {
                  $value = $this->mydoc_data['PersonContributorName'];?>
                  <p><b><?= $this-> translate('PersonContributor')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PersonReferee_0_Name', $this->mydoc_data) &&
                  ($this->refereeNumber > 1))
               {
                  for ($i = 0; $i < $this->refereeNumber; $i++)
                  {
                    $j = $i + 1;
                    if (array_key_exists ('PersonReferee_'.$i.'_Name', $this->mydoc_data) === true)
                    {
                       $value = $this->mydoc_data['PersonReferee_'.$i.'_Name'];?>
                       <p><b><?= $this-> translate('PersonReferee'). ' ('. $j. ')'?>: </b>
                       <?= $this->value = $value;?></p><?
                    }
                  }
               }
               elseif (array_key_exists ('PersonReferee_0_Name', $this->mydoc_data) &&
                      ($this->refereeNumber = 1))
               {
                  $value = $this->mydoc_data['PersonReferee_0_Name'];?>
                  <p><b><?= $this-> translate('PersonReferee')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PersonRefereeName', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['PersonRefereeName'];?>
                  <p><b><?= $this-> translate('PersonReferee')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PersonEditor_0_Name', $this->mydoc_data) &&
                  ($this->editorNumber > 1))
               {
                  for ($i = 0; $i < $this->editorNumber; $i++)
                  {
                    $j = $i + 1;
                    if (array_key_exists ('PersonEditor_'.$i.'_Name', $this->mydoc_data) === true)
                    {
                        $value = $this->mydoc_data['PersonEditor_'.$i.'_Name'];?>
                        <p><b><?=$this-> translate('PersonEditor'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                    }
                  }
               }
               elseif (array_key_exists ('PersonEditor_0_Name', $this->mydoc_data) &&
                      ($this->editorNumber = 1))
               {
                  $value = $this->mydoc_data['PersonEditor_0_Name'];?>
                  <p><b><?= $this-> translate('PersonEditor')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PersonEditor_Name', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['PersonEditor_Name'];?>
                  <p><b><?= $this-> translate('PersonEditor')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PersonTranslator_0_Name', $this->mydoc_data) &&
                  ($this->translatorNumber > 1))
               {
                  for ($i = 0; $i < $this->translatorNumber; $i++)
                  {
                    $j = $i +1;
                    if (array_key_exists ('PersonTranslator_'.$i.'_Name', $this->mydoc_data) === true)
                    {
                        $value = $this->mydoc_data['PersonTranslator_'.$i.'_Name'];?>
                        <p><b><?= $this-> translate('PersonTranslator'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                    }
                  }
               }
               elseif (array_key_exists ('PersonTranslator_0_Name', $this->mydoc_data) &&
               ($this->translatorNumber  = 1))
               {
                  $value = $this->mydoc_data['PersonTranslator_0_Name'];?>
                  <p><b><?= $this-> translate('PersonTranslator')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PersonTranslator_Name', $this->mydoc_data))
               {
                  $value = $this->mydoc_data['PersonTranslator_Name'];?>
                  <p><b><?= $this-> translate('PersonTranslator')?>: </b>
                  <?= $this->value = $value;?></p><?
               }


               if (array_key_exists ('PersonAdvisor_0_Name', $this->mydoc_data) &&
                  ($this->advisorNumber > 1))
               {
                  for ($i = 0; $i < $this->advisorNumber; $i++)
                  {
                    $j = $i+1;
                    if (array_key_exists ('PersonAdvisor_'.$i.'_Name', $this->mydoc_data) === true)
                    {
                        $value = $this->mydoc_data['PersonAdvisor_'.$i.'_Name'];?>
                        <p><b><?= $this-> translate('PersonAdvisor'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                    }
                  }
               }
               elseif (array_key_exists ('PersonAdvisor_0_Name', $this->mydoc_data) &&
                      ($this->advisorNumber = 1))
               {
                  $value = $this->mydoc_data['PersonAdvisor_0_Name'];?>
                  <p><b><?= $this-> translate('PersonAdvisor')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PersonAdvisor_Name', $this->mydoc_data) === true)
               {
                  $value = $this->mydoc_data['PersonAdvisor_Name'];?>
                  <p><b><?= $this-> translate('PersonAdvisor')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('PersonOther_0_Name', $this->mydoc_data) &&
                  ($this->otherPersonNumber > 1))
               {
                  for ($i = 0; $i < $this->otherPersonNumber; $i++)
                  {
                    $j = $i +1;
                    if (array_key_exists ('PersonOther_'.$i.'_Name', $this->mydoc_data) === true)
                    {
                        $value = $this->mydoc_data['PersonOther_'.$i.'_Name'];?>
                        <p><b><?= $this-> translate('PersonOther'). ' ('. $j. ')'?>: </b>
                        <?= $this->value = $value;?></p><?
                    }
                  }
               }
               elseif (array_key_exists ('PersonOther_0_Name', $this->mydoc_data) &&
                      ($this->otherPersonNumber = 1))
               {
                  $value = $this->mydoc_data['PersonOther_0_Name'];?>
                  <p><b><?= $this-> translate('PersonOther')?>: </b>
                  <?= $this->value = $value;?></p><?
               }
               elseif (array_key_exists ('PersonOther_Name', $this->mydoc_data))
               {
                  $value = $this->mydoc_data['PersonOther_Name'];?>
                  <p><b><?= $this-> translate('PersonOther')?>: </b>
                  <?= $this->value = $value;?></p><?
               }

               if (array_key_exists ('TitleAbstract_0_Value', $this->mydoc_data) === true)
               {
                  for ($i = 0; $i < $this->abstractNumber; $i++)
                  {
                     if (array_key_exists ('TitleAbstract_'.$i.'_Value', $this->mydoc_data) === true)
                     {
                        if (array_key_exists ('TitleAbstract_'.$i.'_Language', $this->mydoc_data) === true)
                        {
                           $this->value = $value = $this->mydoc_data['TitleAbstract_'.$i.'_Value'];
                           $this->lang = $lang = $this->mydoc_data['TitleAbstract_'.$i.'_Language'];?>
                           <p><b><?= $this-> translate('TitleAbstractValue') .' ('. $this->translate($lang). ')';?>: </b>
                           <?= $this->value = $value;?></p><?
                        }
                        else
                        {
                           $this->value = $value = $this->mydoc_data['TitleAbstract_'.$i.'_Value'];?>
                           <p><b><?= $this-> translate('TitleAbstractValue');?>: </b>
                           <?= $this->value = $value;?></p><?
                        }
                     }
                  }
               }
               elseif (array_key_exists ('TitleAbstract_Value', $this->mydoc_data) === true)
               {
                  if (array_key_exists ('TitleAbstract_Language', $this->mydoc_data) === true)
                  {
                     $this->value = $value = $this->mydoc_data['TitleAbstract_Value'];
                     $this->lang = $lang = $this->mydoc_data['TitleAbstract_Language'];?>
                     <p><b><?= $this-> translate('TitleAbstractValue') .' ('. $this->translate($lang). ')';?>: </b>
                     <?= $this->value = $value;?></p><?
                  }
                  else
                  {
                     $this->value = $value = $this->mydoc_data['TitleAbstract_Value'];?>
                     <p><b><?= $this-> translate('TitleAbstractValue');?>: </b>
                     <?= $this->value = $value;?></p><?
                  }
              }

               //Licences - 3 cases
              //case 1: licence item is multiple and allocated with more than one element
              if (array_key_exists ('Licence_0_NameLong', $this->mydoc_data) &&
                 ($this->licenceNumber > 1))
              {
                 for ($i = 0; $i < $this->licenceNumber; $i++)
                 {
                    $j = $i +1;
                    // case 'Creative Commons' licences
                    if ($value = substr($licence = $this->mydoc_data['Licence_'. $i. '_NameLong'], 0, 8) === 'Creative')
                    {
                       if (array_key_exists ('Licence_' .$i. '_NameLong', $this->mydoc_data) === true)
                       {
                          $value = $this->mydoc_data['Licence_'. $i. '_NameLong'];?>
                          <p><b><?= $this-> translate('Licence'). '('. $j. ')';?>: </b><?
                          $linklicence = $this ->mydoc_data['Licence_'. $i. '_LinkLicence'];?>
                          <a href = "<?= $this->linklicence = $linklicence;?>"
                          <img src = "<?= $this->layoutPath. '/img/somerights20.gif'?>"title = 'Creative Commons' border = '0'>
                          <a href = "<?= $this->linklicence = $linklicence;?>"<?= $this->linklicence = $linklicence?>>
                          <?= $this->value = $value?></p></a><?
                       }
                    }
                    //other Licences (not 'Creative Commons')
                    else
                    {
                       if (array_key_exists ('Licence_' .$i. '_NameLong', $this->mydoc_data) === true)
                       {
                          $value = $this->mydoc_data['Licence_'. $i. '_NameLong'];?>
                          <p><b><?= $this-> translate('Licence'). '('. $j. ')';?>: </b><?
                          $linklicence = $this ->mydoc_data['Licence_'. $i. '_LinkLicence'];?>
                          <a href = "<?= $this->value = $this->baseUrl(). $linklicence;?>"
                          <img src = "<?= $this->layoutPath. '/img/unilogo.gif'?>"title = 'Unilogo' border = '0'>
                          <a href = "<?= $this->value = $this->baseUrl(). $linklicence;?>"<?= $this->linklicence = $linklicence?>>
                          <?= $this->value = $value?></p></a><?
                       }
                    }
                 }
              }
              //case2: licence is multiple but allocated with only one element ($licenceNumber = 1);
              //(if you don't regard this case, the corresponding output would be 'Licence(1):' instead of 'Licence:')
              elseif (array_key_exists ('Licence_0_NameLong', $this->mydoc_data) &&
                     ($this->licenceNumber = 1))
              {
                 //case 'Creative Commons' licence
                 if ($value = substr($licence = $this->mydoc_data['Licence_0_NameLong'], 0, 8) === 'Creative')
                 {
                     $value = $this->mydoc_data['Licence_0_NameLong'];?>
                     <p><b><?= $this-> translate('Licence');?>: </b><?
                     $linklicence = $this ->mydoc_data['Licence_0_LinkLicence'];?>
                     <a href = "<?= $this->linklicence = $linklicence;?>"
                     <img src = "<?= $this->layoutPath. '/img/somerights20.gif'?>"title = 'Creative Commons' border = '0'>
                     <a href = "<?= $this->linklicence = $linklicence;?>"<?= $this->linklicence = $linklicence?>>
                     <?= $this->value = $value?></p></a><?
                 }
                 // case not 'Creative Commons'
                 else
                 {
                     $value = $this->mydoc_data['Licence_0_NameLong'];?>
                     <p><b><?= $this-> translate('Licence');?>: </b><?
                     $linklicence = $this ->mydoc_data['Licence_0_LinkLicence'];?>
                     <a href = "<?= $this->value = $this->baseUrl(). $linklicence;?>"
                     <img src = "<?= $this->layoutPath. '/img/unilogo.gif'?>"title = 'Unilogo' border = '0'>
                     <a href = "<?= $this->value = $this->baseUrl(). $linklicence;?>"<?= $this->linklicence = $linklicence?>>
                     <?= $this->value = $value?></p></a><?
                 }
              }
              //case3: licence is unique (only one element is possible)
              elseif (array_key_exists ('Licence_NameLong', $this->mydoc_data) === true)
              {
                  // case 'Creative Commons' licence
                  if ($value = substr($licence = $this->mydoc_data['Licence_NameLong'], 0, 8) === 'Creative')
                  {
                     $value = $this->mydoc_data['Licence_NameLong'];?>
                     <p><b><?= $this-> translate('Licence');?>: </b><?
                     $linklicence = $this ->mydoc_data['Licence_LinkLicence'];?>
                     <a href = "<?= $this->linklicence = $linklicence;?>"
                     <img src = "<?= $this->layoutPath. '/img/somerights20.gif'?>"title = 'Creative Commons' border = '0'>
                     <a href = "<?= $this->linklicence = $linklicence;?>"<?= $this->linklicence = $linklicence?>>
                     <?= $this->value = $value?></p></a><?
                  }
                 // case not 'Creative Commons'
                  else
                  {
                     $value = $this->mydoc_data['Licence_NameLong'];?>
                     <p><b><?= $this-> translate('Licence');?>: </b><?
                     $linklicence = $this ->mydoc_data['Licence_LinkLicence'];?>
                     <a href = "<?= $this->value = $this->baseUrl(). $linklicence;?>"
                     <img src = "<?= $this->layoutPath. '/img/unilogo.gif'?>"title = 'Unilogo' border = '0'>
                     <a href = "<?= $this->value = $this->baseUrl(). $linklicence;?>"<?= $this->linklicence = $linklicence?>>
                     <?= $this->value = $value?></p></a><?
                  }
              }
/*              ?>
                <p><b><?= $this-> translate('POD')?>: </b>
                <img src = "<?= $this->value = $this->layoutPath . '/img/proprint_logo.png';?>" border = '0' title = 'Print-on Demand'></a>
                <a href="<?= $this->value = '';?>">Print-on-Demand</a></p><br />
                <?
*/
   }


