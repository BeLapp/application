h1. OPUS 4 Change Log

h2. ======================== Release 4.1.1 2011-06-03 ========================

h3. Bugfixes

* [OPUSVIER-752] - Wiederherstellen (Publishing) eines gelöschten Dokumentes von der Metadata Seite erzeugt SOLR Exception
* [OPUSVIER-810] - Alternatives Startmodul wird nicht verlinkt
* [OPUSVIER-852] - Einbringen einer neuen Datei im Dateimanager trotz Fehlermeldung
* [OPUSVIER-864] - OutOfMemory-Fehler beim Zuordnen der Collection "bk" zu einem Dokument
* [OPUSVIER-885] - Einige Opus Modelle produzieren Fehler wenn man *__toString* für neue noch "leere" Instanzen aufruft
* [OPUSVIER-926] - OAI-Schnittstelle wirft Exception, wenn ungültige Strings in server_date_published stehen
* [OPUSVIER-998] - Datei-Download: Zugriff nicht nach Benutzername steuerbar
* [OPUSVIER-1006] - Form_Builder überschreibt NULL-Werte wenn leere Eingabefelder übermittelt werden
* [OPUSVIER-1048] - Exception in Collection-Auswahl beim Reload von publish/collection/sub
* [OPUSVIER-1155] - Cache-Dateien liegen in "/tmp"
* [OPUSVIER-1311] - User-Feedback: "php-mbstring" standardmäßig nicht installiert unter SuSE
* [OPUSVIER-1316] - Collection-Auswahl im Publikationsformular Schritt 2: Nicht ausgewählte Collection kann nicht mehr rückgängig gemacht werden
* [OPUSVIER-1325] - XSS in Collectionauswahl möglich
* [OPUSVIER-1332] - Titel fehlt, wenn ein Dokument von restricted zu published gesetzt wird
* [OPUSVIER-1337] - Dokumentsprache wird in section/general nicht übernommen
* [OPUSVIER-1345] - Tarball Versionsnummer maskieren
* [OPUSVIER-1346] - Publish-Formular: HTML-Sonderzeichen werden falsch abgespeichert.
* [OPUSVIER-1348] - falsche Verlinkung zum alten Admin-Formular
* [OPUSVIER-1351] - Script opus-dump-document-xml.php benutzt XML-Cache nicht
* [OPUSVIER-1363] - Reihenfolge der Autoren eines Dokuments nicht definiert
* [OPUSVIER-1365] - Problem mit server_date_created
* [OPUSVIER-1369] - Syntaxfehler im Datenbank-Updateskript
* [OPUSVIER-1372] - nichtexistierende Grafik zu Lizenzen auf der Frontdoor
* [OPUSVIER-1385] - Fehler beim Anlegen eines eigenen Layouts
* [OPUSVIER-1388] - postinst Skript im Deb-Package enthält Windows-Steuerzeichen 0D0A
* [OPUSVIER-1399] - kein Frontdoor-Zugriff für guest nach Update von 4.0.2 auf 4.1.0
* [OPUSVIER-1405] - neue Sprachen erfordern Anpassungen in den fieldnames.tmx
* [OPUSVIER-1429] - Deb-Package: install_ubuntu.sh: line 19: ./install.sh: No such file or directory
* [OPUSVIER-1433] - 403-fehlermeldung: "server" statt "sever"
* [OPUSVIER-1435] - E-Mailversand an Autoren funktioniert nicht
* [OPUSVIER-1438] - Dateidownload funktioniert nicht, wenn im Dateinamen zwei oder mehr zusammenhängende Leerzeichen enthalten sind
* [OPUSVIER-1439] - Deb-Package: Unnötige Dependencies "subversion", "curl", "php-crypt-gpg", "xdebug"
* [OPUSVIER-1444] - Werte im Publish-Formular werden doppelt-escaped in Datenbank gespeichert
* [OPUSVIER-1446] - Schlagwortsprache wird nicht im Publish-Formular abgefragt
* [OPUSVIER-1452] - $Id$-Keyword im OPUS-Prolog wird bei einigen Dateien aufgrund nicht gesetzter svn:keywords Eigenschaft nicht gesetzt
* [OPUSVIER-1458] - Abbrechen-Aktion im zweiten Formularschritt führt kein Cleanup durch
* [OPUSVIER-1462] - createdb.sh.template stirbt, wenn Passwort Leerzeichen enthält
* [OPUSVIER-1468] - Publish-Formulare: Feld "ServerDateUnlocking" muss entfernt werden
* [OPUSVIER-1470] - Installation des Deb-Package stürzt unter Ubuntu 11.04 ab
* [OPUSVIER-1472] - Probleme mit der Frontdoor bzw. Statistik (weiße Seite)
* [OPUSVIER-1475] - deletePermanent() sollte Ordner des Dokuments löschen
* [OPUSVIER-1484] - beim Aufruf der Applikation über index.php zerbricht das Layout und index.php verbleibt in URL
* [OPUSVIER-1489] - create-tarball-script: Verzeichnis "workspace/files/error" existiert nicht
* [OPUSVIER-1493] - keine Auslieferung und Ausführung von common.phtml in /public erlauben

h3. Stories

* [OPUSVIER-995] - FileManager: Upload-Size und erlaubte Dokumenttypen fest vorgegeben
* [OPUSVIER-1094] - Datenbank-Änderungen für die 4.1
* [OPUSVIER-1102] - Anpassungen für geänderten Datei-Download-Pfad

h3. Tasks

* [OPUSVIER-974] - Zugriffsbeschränkung sollte auf Frontdoor angezeigt werden
* [OPUSVIER-987] - Subject-Unterfeld "Type" wird mit "Document Type" beschriftet
* [OPUSVIER-1151] - Titleimport bei Dissertationen
* [OPUSVIER-1158] - Gesammelte Datenbank-Änderungen für die 4.1
* [OPUSVIER-1236] - Model Opus_File: EmbargoDate
* [OPUSVIER-1243] - Umbau Rechte: Modul "review" fixen und Unit-tests wieder aktivieren
* [OPUSVIER-1247] - Rechte-Umbau, Modul Account: Check der Config-Parameter 'account.editOwnAccount' in Controller verlagern
* [OPUSVIER-1260] - Durch Datenbank-Umbau überflüssige Übersetzunggschlüssel entfernen
* [OPUSVIER-1313] - OAI-Schnittstelle: MetadataPrefix "oai_pp" / Proprint Format
* [OPUSVIER-1350] - Fix für ungültige XML-Zeichen in Opus-Modellen: Wodurch soll ersetzt werden?
* [OPUSVIER-1352] - Unit-Tests: Behandlung von ungültigen Zeichen in der Datenbank
* [OPUSVIER-1356] - Update-Skript: SolrIndexBuilder.php erst nach dem Aktualisieren der Datenbank aufrufen
* [OPUSVIER-1374] - Update-Skript darf keine impliziten Annahmen über Installationsverzeichnis machen
* [OPUSVIER-1375] - eingegebene OPUS-Versionsnummer wird nicht validiert
* [OPUSVIER-1377] - Solr-Server muss nach Schemaupdate neu gestartet werden, damit Änderung übernommen wird
* [OPUSVIER-1378] - Update-Skript sollte die durchgeführten Änderungen in Logdatei protokollieren
* [OPUSVIER-1379] - Update-Skript darf nicht MySQL root-Credentials abfragen
* [OPUSVIER-1380] - Auslesen von Werten aus Konfigdateien nicht mit fest-codierter Positionsangabe 
* [OPUSVIER-1382] - Update-Skript aktualisiert nicht die Apache-Konfiguration
* [OPUSVIER-1389] - Update-Skript momentan auf Zielversion 4.1.0 zugeschnitten
* [OPUSVIER-1392] - Updateskript stirbt beim Update von OPUS 4.0.x auf OPUS 4.1.0 bei neu hinzugefügten Verzeichnissen
* [OPUSVIER-1393] - Updateskript nicht resistent gegen Fehleingaben
* [OPUSVIER-1396] - Update-Skript kopiert keine neu hinzugefügten Controller
* [OPUSVIER-1397] - Update-Skript fügt nur neu hinzukommende Dateien hinzu, löscht aber keine Dateien, die nicht mehr ausgeliefert werden
* [OPUSVIER-1401] - Update-Skript berücksichtigt nicht alle Modul-Verzeichnisse
* [OPUSVIER-1403] - Neustart des Apachen am Ende des Install-Skripts aufnehmen
* [OPUSVIER-1404] - Update-Skript sollte Datenbank-Verbindungsdaten aus db/createdb.sh
* [OPUSVIER-1412] - Unit-Test: Vertauschen von Tag/Monat in Opus_Date reproduzieren
* [OPUSVIER-1421] - Update Skript sollte in mehrere Skripte zerlegt werden, die Teilaspekte implementieren
* [OPUSVIER-1425] - Update des OPUS Layouts überdenken
* [OPUSVIER-1440] - Rechte-Umbau: Methode "requirePrivilege" aus matheon-Modul entfernen
* [OPUSVIER-1441] - Rechte-Umbau: Methode "requirePrivilege" aus remotecontrol-Modul entfernen
* [OPUSVIER-1442] - Rechte-Umbau: Methode "requirePrivilege" aus Klasse "Controller_Action" entfernen
* [OPUSVIER-1460] - Create backup script for database
* [OPUSVIER-1464] - Opus_Person: Automatisches Setzen von SortOrder beim Hinzufügen neuer Autoren
* [OPUSVIER-1465] - Opus_Person: SortOrder korrekt initialisieren bei "->setPersonAuthor($authors)"

h3. Documentation

* [OPUSVIER-1327] - Fehler in Kapitel 8.3.1 XML-Dokumenttypdefinitionen
* [OPUSVIER-1328] - Browsing-Felder dokumentieren
* [OPUSVIER-1329] - Fehlender Zeilenumbruch in Kapitel 8.4.3 Anzeige in der Frontdoor und in Kapitel 11.3 Weitere Interaktion
* [OPUSVIER-1331] - Fehler in Kapitel 8.4.1
* [OPUSVIER-1344] - ServerName in Apache-Config eintragen: Kap. 5.2.4
* [OPUSVIER-1366] - Unklarheit in der Beschreibung des manuellen Updates (Kap. 11.2)
* [OPUSVIER-1367] - Fehler in Kap. 2.6 (Export)
* [OPUSVIER-1381] - Fehler in Kap. 5.2.4 (Installation unter Ubuntu ohne Paketverwaltung)
* [OPUSVIER-1384] - Fehler im Kapitel 8.3.2 Templates
* [OPUSVIER-1387] - Fehler in Kap. 8.6 (benutzerspezifische Layouts)
* [OPUSVIER-1402] - Fehler in Doku in Kap. 5.2.1 und 5.3.1 (Installation von php5 unter ubuntu bzw. opensuse)


h2. ======================== Release 4.1.0 2011-04-27 ========================

h3. Stories

* OPUSVIER-1233 -   nachträgliches Hinzufügen von Dateien zu Dokumenten
* OPUSVIER-1209 -   Umbau OPUS-Rechtemanagement
* OPUSVIER-1157 -   OAI-Schnittstelle unterstützt Feature "deletedRecord" nicht
* OPUSVIER-1110 -   OpenSearch Support
* OPUSVIER-1096 -   Module "crawlers/sitelinks" soll Dokumente jahresweise anzeigen
* OPUSVIER-1094 -   Datenbank-Änderungen für die 4.1
* OPUSVIER-1092 -   Collections-Methode mit Rückgabe der Parent-Id
* OPUSVIER-1091 -   Frontdoor-Titel: Anzeigen des Dokument-Titels
* OPUSVIER-1089 -   Referee field in frontdoor is not clickable
* OPUSVIER-1088 -   Link-Attribute nofollow,noindex für Such-Crawler
* OPUSVIER-1080 -   Zugriffsrechte
* OPUSVIER-1059 -   Editieren des Bemerkungsfeldes zu einer Datei im Nachhinein nicht möglich
* OPUSVIER-1040 -   Veröffentlichungsformular - Auswahl der DDC-Sachgruppen als Pull-Down-Liste
* OPUSVIER-1039 -   Veröffentlichungsformular - Link zur SWD Schlagwortdatei
* OPUSVIER-1038 -   Erstellen von Schriftenreihen
* OPUSVIER-919  -   Vorlagen für Impressum und Deposit-License erstellen
* OPUSVIER-909  -   Release-Updateskript erstellen
* OPUSVIER-797  -   Kein HTML bei Kontaktinformationen
* OPUSVIER-613  -   OAI-Schnittstelle
* OPUSVIER-184  -   Prüfen und ergänzen der Metadatenformate, die die OAI-Schnitstelle unterstützt

h3. Specification

* OPUSVIER-895  -   Collections für die Standardauslieferung
* OPUSVIER-438  -   Umgang mit den Zend_Lucene-Relikten

h3. Documentation

* OPUSVIER-1303 -   Anlegen der Datei opus-apache-rewritemap-caller.sh aus der Doku entfernen
* OPUSVIER-1289 -   Featurebeschreibung für nachträgliche Hinzufügen von Dateien zu Dokumenten
* OPUSVIER-1288 -   neues Verzeichnis workspace/incoming in Dokumentation aufnehmen
* OPUSVIER-1286 -   Komplkationen mit php5-librdf und OAI sowie BibTeX
* OPUSVIER-1234 -   Nutzer-Doku: Individuelle Templates
* OPUSVIER-1221 -   Neues Rechte-System dokumentieren
* OPUSVIER-1218 -   Beschreibung des Moduls Export
* OPUSVIER-1212	-   fehlende OAI-Konfigparameter (aktuell in application.ini)
* OPUSVIER-1196 -   Vorgehen zum Anlegen eines eigenen Layouts
* OPUSVIER-1192 -   Unklarheiten in der Konfiguration des FAQ-Mechanismus
* OPUSVIER-1170 -   Hinweis in Doku, dass einem Dokument maximal eine Bandnummer zugewiesen werden kann
* OPUSVIER-1167 -   Übersetzungsschlüssel für Werte der Bibliographie- und Volltext-Vorhanden-Facette
* OPUSVIER-896  -   Script "change-password.php" in Dokumentation aufnehmen

h3. Bug Fixes

* OPUSVIER-1314 -   Edit-Links in Dokumentverwaltung funktionieren nicht, wenn Dokument direkt per ID aufgerufen wird
* OPUSVIER-1312 -   MailToAuthor: unerlaubter Mailversand an Autoren möglich durch clientsetige Manipulation des Formulars
* OPUSVIER-1305 -   neu hochgeladene Dateien können zunächst von niemandem gesehen werden (außer Admin)
* OPUSVIER-1296 -   Funktion "mail to Author" funktioniert nicht
* OPUSVIER-1282 -   Beim Speichern einer Sammlung werden alle Zwischenschritte als einzelne Sammlungszuweisungen mitgespeichert
* OPUSVIER-1281 -   Fehler beim Abspeichern einer Sammlung
* OPUSVIER-1278 -   XSS-Vulnerability im CitationExport (sowohl BibTeX als auch RIS)
* OPUSVIER-1277 -   BibTeX-Export: Escaping von Non-ASCII-Zeichen (außer äÄöÖüÜ)
* OPUSVIER-1274 -   CitationExport liefert auch Dokumente aus, die nicht im server_state published sind
* OPUSVIER-1261 -   Suche nach ID nicht bei Sammlungen verwalten anzeigen
* OPUSVIER-1255 -   Frontdoor: Statt Dateiname wird Label-Feld angezeigt
* OPUSVIER-1254 -   Filemanager: Label-Feld kann nicht bearbeitet werden
* OPUSVIER-1252 -   Collectionzuordnung für Dokumente zeigt nicht alle vorhandenen CollectionRoles an
* OPUSVIER-1251 -   fehlende Übersetzungsschlüssel für Seitentitel in Collection/CollectionRole-Administration
* OPUSVIER-1246 -   DNB-Institute werden nicht richtig im Publish-Formular angezeigt
* OPUSVIER-1244 -   Unterschiedlicher Abstand in Footer-Links
* OPUSVIER-1227 -   Script "rebuilding_database.sh" entfernt SVN-Verzeichnisse und bricht "opus4server" auf dem CI-System
* OPUSVIER-1215 -   Export liefert zu wenige Dokumente
* OPUSVIER-1208 -   Application_Exception in /solrsearch/index/search (was caught in Matheon instance)
* OPUSVIER-1205 -   Parameter form.first.requireupload
* OPUSVIER-1188 -   obsolete Schlüssel in home.tmx entfernen
* OPUSVIER-1186 -   rebuilding_database.sh ist abhängig vom momentanen arbeitsverzeichnis
* OPUSVIER-1177 -   Fehler in Bestätigungsnachricht nach Entfernen der Collectionzuordnung zu einem Dokument
* OPUSVIER-1176 -   Nicht angezeigte Collection_Role kann durch Raten der RootCollection-ID dennoch angezeigt werden
* OPUSVIER-1175 -   leere CollectionRole mit zugeordneten published Dokumenten erscheint nicht im Browsing
* OPUSVIER-1174 -   CollectionRole anklickbar, obwohl alle Untercollections auf der ersten Ebene unsichtbar sind und der CollectionRole selbst keine published Dokumente zugeordnet sind
* OPUSVIER-1173 -   Unsichtbarkeit von Collections wird nicht auf die Knoten im Unterbaum propagiert
* OPUSVIER-1168 -   rows-Parameter wird nicht validiert
* OPUSVIER-1165 -   Fehler in Doku 8.5 und 8.6: Kontaktseite bzw. Impressumseite
* OPUSVIER-1159 -   Facettenschlüssel verbleiben nach Entfernen einer ausgewählten Facette in der URL
* OPUSVIER-1155 -   Cache-Dateien liegen in "/tmp"
* OPUSVIER-1146 -   automatische URN Vergabe funktioniert nicht
* OPUSVIER-1143 -   Fehlende Übersetzungsschlüssel
* OPUSVIER-1142 -   Filemanager: Fehler beim Erzeugen der Md5, SHA512 Prüfsummen
* OPUSVIER-1137 -   Installation unter OpenSuse: Anpassung der Variable USER in opus-apache-rewritemap-caller-secure.sh
* OPUSVIER-1127 -   Fehler in RewriteRule in Kapitel 10.4
* OPUSVIER-1115 -   falsches Geburtsdatum bei Personen
* OPUSVIER-1100 -   solrsearch/views/scripts/index/results.phtml(82): Invalid argument supplied for foreach()
* OPUSVIER-1093 -   Model löscht Collections, wenn man die Zuordnung zu einem Dokument entfernt
* OPUSVIER-1087 -   Fehlerhafter Leitlinien-Link in Upload-Formular
* OPUSVIER-1062 -   erweitertes <epicur>-Wurzelelement
* OPUSVIER-1061 -   OAI - Es werden keine URLs bei der Abfrage (epicur) ausgegeben
* OPUSVIER-982  -   Eingeschraenkte Zugriffsberechtigung über IP-Bereiche
* OPUSVIER-971 	-   BibTeX-Export liefert 20-Byte-Datei aus
* OPUSVIER-970 	-   Frontdoor: Volltext-Dateien mit zu langen Dateinamen machen das Layout kaputt
* OPUSVIER-948 	-   Keine Datei-Downloads für unpublished-Dokument möglich (Cookie-Problem!)
* OPUSVIER-935 	-   Auth-Controller verliert Parameter bei Weiterleitung
* OPUSVIER-930 	-   Parameter requireupload funktioniert nicht
* OPUSVIER-928 	-   Seitentitel "OPUS 4 | default_auth_login" bei fehlgeschlagenem Login
* OPUSVIER-903 	-   Zu DDC zugeordnetes Dokument wird nicht im Browsing angezeigt
* OPUSVIER-900 	-   Leitlinien-Link im Formular führt auf Fehlerseite nachdem Formular mit Eingabefehlern zurückgegeben wurde
* OPUSVIER-865 	-   angezeigtes Datum soll CompletedDate sein
* OPUSVIER-712 	-   OAI-Schnittstelle missachtet Flag "VisibleInOai"
* OPUSVIER-652 	-   Uneinheitliche Darstellung bei Freie Schlagworte/Tags
* OPUSVIER-482 	-   Matheon-Instanz: BibTeX nicht okay
* OPUSVIER-354 	-   Aufräumen der Reste von abgebrochenen Dokumentuploads
* OPUSVIER-139 	-   OPUS_Security blockt IPv6

h3. Tasks

* OPUSVIER-1319 -   Rechte-Umbau: Anzeige von Edit-Button auf Frontdoor kaputt für User != Admin
* OPUSVIER-1318 -   Rechte-Umbau: Anzeige von Admin-Button kaputt für User != Admin
* OPUSVIER-1315 -   Link zur Autorkontaktierung nur anzeigen, wenn mindestens ein Autor existiert, der kontaktierbar ist
* OPUSVIER-1300 -   Änderung von Kommentar, Sprache und Label von Dateien im Dateimanager
* OPUSVIER-1299 -   Link auf Filebrowser in Administration einfügen
* OPUSVIER-1298 -   Rechte-Umbau: Hinzufügen von Dokument-Rechten über die Administration
* OPUSVIER-1297 -   Rechte-Umbau: Hinzufügen von Datei-Rechten über die Administration
* OPUSVIER-1294 -   Änderungen der Rewrite-Regeln in der Dokumentation erwähnen
* OPUSVIER-1293 -   Controller und View für das nachträgliche Hinzufügen von Dateien zu Dokumenten im Admin-Bereich
* OPUSVIER-1291 -   Leitlinien Link
* OPUSVIER-1290 -   Änderung des Verzeichnis des Migrationsskripts
* OPUSVIER-1287 -   incoming Verzeichnis in Tarball aufnehmen
* OPUSVIER-1283 -   Migrations-Scripte in server/scripts in eigenes Verzeichnis migration auslagern
* OPUSVIER-1280 -   Code Duplication in BibTeX-Export entfernen
* OPUSVIER-1272 -   Zuweisung einer Bandnummer im Publish-Formular
* OPUSVIER-1259 -   Rechte-Umbau: Admin->FileHelper enthält noch alten Privilege-Code
* OPUSVIER-1257 -   OAI-Parameter oai.ddb.contactid aus der config.ini-template entfernen
* OPUSVIER-1256 -   Rechte-Umbau: Nicht-benötigte Klasse "Controller_Plugin_ModuleInit" entfernen
* OPUSVIER-1250 -   Rechte-Umbau, Modul Publish: "Opus_Security_Realm::getInstance()->check('publish')" in Controller
* OPUSVIER-1249 -   Rechte-Umbau, Modul Frontdoor: "check('readMetadata', $doc->getServerState()))" in Controller verlagern.
* OPUSVIER-1248 -   Rechte-Umbau, Modul CitationExport: "check('readMetadata', $doc->getServerState()))" in Controller verlagern.
* OPUSVIER-1245 -   Link nur anzeigen, wenn die Collection verknüpfte Dokumente enthält
* OPUSVIER-1239 -   URN-Parameter "urn.autoCreate = true" entfernen
* OPUSVIER-1238 -   Model Opus_Dnbinstitute: neues Feld 'IsPublisher' und neue Methode 'getPublishers'
* OPUSVIER-1237 -   Model Opus_Reference: Relation
* OPUSVIER-1235 -   Model Opus_Document: IdentifierArxiv, IdentifierPubmed, ReferenceOpus4
* OPUSVIER-1228 -   Umbau Rechte: "init.php" aus allen Server-Modulen entfernen
* OPUSVIER-1226 -   LatestDocuments-XHTML mit link-Element auf RSS-Feed anreichern
* OPUSVIER-1225 -   Einbindung RSS-Icon in Latest Documents Browsing
* OPUSVIER-1224 -   Umbenennung der Schlüssel für die Startseite
* OPUSVIER-1223 -   Rechte-Umbau: Model-Klasse für Tabelle "access_modules" erstellen
* OPUSVIER-1222 -   neues Feld server_date_created in Tabelle documents
* OPUSVIER-1220 -   Rechte-Umbau: Check der Datei-Rechte implementieren
* OPUSVIER-1219 -   Rechte-Umbau: Check der Dokument-Rechte implementieren
* OPUSVIER-1217 -   Rechte-Umbau: Check der Modul-Rechte implementieren
* OPUSVIER-1216 -   URL des offiziellen OPUS-Subversion veröffentlichen
* OPUSVIER-1211 -   Dokumentexport durch Anhängen von Parametern in den solrsearch/index/search URLs
* OPUSVIER-1210 -   Zugriff auf Modul export einschränken
* OPUSVIER-1206 -   Update-Skript in Deb-Package einbauen
* OPUSVIER-1204 -   Update-Script dokumentieren
* OPUSVIER-1203 -   Löschen der Übersetzungsschlüssel der gelöschten FAQ-Texte
* OPUSVIER-1202 -   Festlegen der Standard-FAQ-Texte
* OPUSVIER-1201 -   Übersicht, welche Felder in den Templates als group bzw. element ausgewiesen werden müssen
* OPUSVIER-1200 -   MD5SUMS Datei im Wurzelverzeichnis des Tarballs aufnehmen
* OPUSVIER-1199 -   Verzeichnis releases im Wurzelverzeichnis des Tarballs erstellen
* OPUSVIER-1198 -   Datei VERSION.txt im Wurzelverzeichnis des Tarballs erstellen
* OPUSVIER-1197 -   Release-Tagging für apacheconf, solrconfig und install
* OPUSVIER-1195 -   Datei md5sums in Deb-Package aufnehmen
* OPUSVIER-1194 -   Anlegen eines alter-db-skript
* OPUSVIER-1189 -   Schemaänderung propagieren
* OPUSVIER-1187 -   Checkliste vor Liveschaltung einer OPUS 4-Instanz
* OPUSVIER-1182 -   Kapitelüberschriften den Kapiteldtitelblättern hinzufügen
* OPUSVIER-1180 -   Erweiterung der Anzeige in der Dokumentverwaltung
* OPUSVIER-1179 -   Link in der Sammlungsadministration, der alle zugeordneten Dokumente anzeigt
* OPUSVIER-1172 -   Menüpunkte im Breadcrumb abkürzen
* OPUSVIER-1169 -   Anzeige von Bandnummer und zugehöriger Schriftenreihe in Frontdoor
* OPUSVIER-1161 -   Implizite Abhängigkeit zwischen Apache-Config und config.ini
* OPUSVIER-1154 -   Migration der Bandnummern für Schriftenreihen
* OPUSVIER-1150 -   Migration der BKL
* OPUSVIER-1147 -   Erweiterung der Felder für DNB-Institut
* OPUSVIER-1147 -   Erweiterung der Felder für DNB-Institut
* OPUSVIER-1126 -   Anpassung in den RewriteRules für das Umschreiben der alten OPUS 3.x Volltext-URLs (S. 63 ff.)
* OPUSVIER-1125 -   Anpassung Apache Config in der Dokumentation (Seite 32)
* OPUSVIER-1124 -   Anzeige von Bandnummer und zugehöriger Schriftenreihe im Browsing
* OPUSVIER-1122 -   Ausgabe von Suchtreffern als RSS-Feed
* OPUSVIER-1121 -   Anpassung der XML-Ausgabe per XSL-Stylesheets
* OPUSVIER-1120 -   Ausgabe von Suchtreffern im Format OPUS-XML
* OPUSVIER-1119 -   Facettierte Suche innerhalb des Browsings
* OPUSVIER-1117 -   GPL Text zur Distribution hinzufügen
* OPUSVIER-1113 -   Fehler in Anzeige der Suchergebnisseite beim Verkleinern des Browserfensters
* OPUSVIER-1111 -   Bereitstellung eines OpenSearch Deskriptors
* OPUSVIER-1105 -   Installations-Script: Download-Pfad jetzt als Unterverzeichnis "/opus4/files/"
* OPUSVIER-1103 -   Dokumentation anpassen: Config-Schlüssel "deliver.url.prefix" entfernt
* OPUSVIER-1099 -   Neue Schema-Datei anlegen!
* OPUSVIER-1098 -   Model Opus_File: Neues Feld "comment" in Taballe "documents_files"
* OPUSVIER-1097 -   Update-Script: Neues Feld "comment" in Tabelle "documents_files"
* OPUSVIER-1095 -   Update-Script: Neue Datenbank-Constraints für die collections-Tabelle
* OPUSVIER-1065 -   Kommentare auf Dateiebene
* OPUSVIER-1042 -   Änderung der Reihenfolge von Collections auf einer Ebene
* OPUSVIER-1041 -   Veröffentlichungsformular - Auswahl der Schriftenreihen
* OPUSVIER-1037 -   Veröffentlichungsformular - Auswahl der Institute
* OPUSVIER-1018 -   Zuordnung von Collections im zweiten Schritt als Browsing innerhalb des Formulars
* OPUSVIER-988 	-   Anzeigefehler im Opera: blauer Balken im Seitenfooter
* OPUSVIER-976 	-   Layout: message-Element in opus.css ist 1000px breit
* OPUSVIER-975 	-   Menüleiste verschwindet bei Auflösung von 800x600 und kleiner
* OPUSVIER-957 	-   Bugfix in schema.xml erfordert Neuaufbau des Index
* OPUSVIER-947 	-   Anzeigefehler in Chrom(e|ium)
* OPUSVIER-934 	-   Anzeige der Bibliographie- und Volltext-Facette
* OPUSVIER-933 	-   Credits
* OPUSVIER-904 	-   Fehler im Design bei den Breadcrumbs im Browsing
* OPUSVIER-890 	-   Dok.typen für XMetaDiss Auslieferung umbenennen
* OPUSVIER-830 	-   leere Collections nicht anklickbar machen
* OPUSVIER-829 	-   Übersetzungsschlüssel von Collections
* OPUSVIER-821 	-   Suchergebnis "halten"
* OPUSVIER-769 	-   Funktion zum Verändern des Sichtbarkeitsstatus eines Unterbaums
* OPUSVIER-767 	-   Download aller Dokumente mit Flag 'Bibliographie' als Liste
* OPUSVIER-640 	-   Suche Zurücksetzen Button löscht Suchergebnisse
* OPUSVIER-553 	-   Hinzufügen von Dependent-Models für Document<->Collection, CollectionRole<->Collection
* OPUSVIER-423 	-   Export von Suchergebnissen / Publikationslisten
* OPUSVIER-238 	-   Behandlung von Fehlern in Templates
* OPUSVIER-217 	-   Konsolidierung der unterschiedlichen Ablageorte von Klassen mit Solr-Bezug
* OPUSVIER-185 	-   Prüfen der Metadatenformate, die die OAI-Schnittstelle derzeit Unterstützt
* OPUSVIER-153 	-   Asynchrone Indexaktualisierung mittels Cron
* OPUSVIER-113 	-   Bearbeitung der OAI-Resumption-Token in extra Klasse auslagern

h2. ======================== Release 4.0.3 2011-02-21 ========================

h3. Bug Fixes

* [OPUSVIER-598] - Ausgewählter Reiter wird nicht immer korrekt angezeigt
* [OPUSVIER-663] - RSS-Export der neuesten Dokumente liefert HTML-Seite aus
* [OPUSVIER-724] - Validierung "required-if-fulltext" funktioniert nicht
* [OPUSVIER-847] - leere Klammern in der Ergebnisanzeige
* [OPUSVIER-906] - Probleme beim Upload weiterer Datei
* [OPUSVIER-920] - Übersetzungsschlüssel anpassen
* [OPUSVIER-929] - Multiplicity bei Instituten läßt sich nicht ändern
* [OPUSVIER-936] - Installations-Skript funktioniert nicht mit openSUSE 11.3
* [OPUSVIER-937] - Installationsprobleme im Zusammenhang mit namebased vhost
* [OPUSVIER-938] - Import
* [OPUSVIER-939] - Migration: Problem mit Sonderzeichen und Klassifikationen
* [OPUSVIER-940] - Problem mit der OPUS-ID
* [OPUSVIER-941] - Problem beim Import von DDC-Sachgruppen
* [OPUSVIER-942] - Import nicht publizierter Dokumente
* [OPUSVIER-944] - XSS im Publish-Formular
* [OPUSVIER-945] - XSS-Vulnerability in Dokumentverwaltung
* [OPUSVIER-946] - Dokumentverwaltung zeigt mehrere Submitter, obwohl nur einer eingetragen wurde
* [OPUSVIER-951] - Login-Mechanismus funktioniert nicht, wenn mehrere Parameter übergeben werden
* [OPUSVIER-952] - Dokumente werden nicht angenommen, wenn rechtliche Hinweise nicht ausgewählt
* [OPUSVIER-953] - Publish-Formular: Allow-Email-Contact per Default immer an
* [OPUSVIER-954] - Publish-Formular: Formular springt bei Änderungen wieder nach oben
* [OPUSVIER-955] - SolrIndexBuilder wirft Zend_Db_Statement_Exception, wenn startID (und endID) angegeben werden
* [OPUSVIER-959] - Formatierungsfehler in Dokumentation: zu lange Zeilen
* [OPUSVIER-960] - Klarstellung zur Migration: Direktupdate von OPUS 3.0 möglich
* [OPUSVIER-963] - "Invalid credentials" - "No token was provided to match against"
* [OPUSVIER-966] - XSS ersten Schritt des Publish-Formulars (Dateiname)
* [OPUSVIER-967] - XSS im Filemanager
* [OPUSVIER-969] - Publish-Formular: Manchmal werden Dateien doppelt hochgeladen
* [OPUSVIER-983] - Fehler bei Migration von OPUS 3.x-Instanzen ohne Collections
* [OPUSVIER-985] - Opus_File: Datei mit selbem Namen überschreibt alte!
* [OPUSVIER-986] - Dateimanager-Crash bei nicht-existierenden Dateien
* [OPUSVIER-989] - Manage documents: Too few columns for the primary key
* [OPUSVIER-990] - Abstract muss required sein wenn Datei hochgeladen wird
* [OPUSVIER-991] - FileManager: "File too large" falls Null-Byte-Datei
* [OPUSVIER-994] - FileManager: Kein Fehler, falls Datei-Ordner nicht schreibbar
* [OPUSVIER-1001] - Opus_Model: ParentId wird nicht korrekt gesetzt
* [OPUSVIER-1002] - Fehlender Übersetzungsschlüssel "admin_filemanager_file_does_not_exist" im Admin-Bereich
* [OPUSVIER-1003] - Apt-Get befehle korrekt einrücken
* [OPUSVIER-1004] - Deb-Package installiert openjdk, obwohl sun-jdk installiert ist
* [OPUSVIER-1005] - hochgeladene Datei wird zweimal abgespeichert
* [OPUSVIER-1008] - Sprungmechanismus im zweiten Formularschritt beim Hinzufügen von neuen Fehlern funktioniert nicht nach dem Zurückkehren aus dem dritten Schritt
* [OPUSVIER-1009] - aussagekräftigere Meldung beim nicht-wiederherstellbaren Löschen eines Dokuments
* [OPUSVIER-1010] - Nicht benutzte Dokument-Feld publication_state in Metadatenverwaltung ausblenden
* [OPUSVIER-1012] - Exception nach Aufruf des Login-Formulars ohne r*-URL-Parameter
* [OPUSVIER-1013] - Aussagekräftige Fehlermeldung im Produktivsystem abstellen
* [OPUSVIER-1014] - OPUS-Installation benötigt Subversion-Client
* [OPUSVIER-1016] - Given resumption path /workspace/tmp/resumption is not a directory.
* [OPUSVIER-1028] - XSS im Publish-Formular (Collections-Auswahl)
* [OPUSVIER-1029] - Fehlende Übersetzungen in Collection-Auswahl
* [OPUSVIER-1030] - XSS im Publish-Formular (Fehlermeldungen)
* [OPUSVIER-1031] - Kein gültiges Datumsformat: "YYYY/MM/YY"
* [OPUSVIER-1032] - Benutzer kann erfolgreich seinen Loginnamen überschreiben
* [OPUSVIER-1033] - Keine Informationen über nicht-existierende Accounts preisgeben
* [OPUSVIER-1034] - Logout-Link unter auth/index funktioniert nicht
* [OPUSVIER-1036] - Publish-Formular nicht resistent gegen abgelaufene / ungültige User-Session
* [OPUSVIER-1051] - Fehler im Bootstrap (Applikation startet nicht) , wenn opus.log für Webserver-Prozess nicht schreibbar
* [OPUSVIER-1054] - Apache Installation/Konfiguration unter openSuSE
* [OPUSVIER-1057] - Error beim Publish von grossen Dokumenten ausserhalb der zulaessigen Dateigroesse
* [OPUSVIER-1058] - Dateiupload von Dateien, die größer 20 MB sind, aktuell nicht möglich
* [OPUSVIER-1069] - Verbesserte Fehlermeldung beim Versuch eine bereits hochgeladene Datei erneut hochzuladen
* [OPUSVIER-1070] - Falsches Sprungziel nach abspeichern einer Collection
* [OPUSVIER-1079] - XSS-Vulnerability in Browsing nach Dokumenttypen

h3. Improvements

* [OPUSVIER-912] - Feld "Allow Email Contact?" wird immer wieder aktiviert
* [OPUSVIER-968] - Dateien auf Check-Seite des Publish-Formulars werden nicht angezeigt
* [OPUSVIER-1046] - Sichtbarkeit in Google-Scholar
* [OPUSVIER-2] - Instanzspezifische Übersetzungsressourcen
* [OPUSVIER-202] - IgnoreMultiplicity-Hack von aus Opus_Model_Field entfernen
* [OPUSVIER-660] - Eingabemöglichkeit für DDC
* [OPUSVIER-835] - Kollektionsauswahl im dritten Formularschritt berücksichtigt nicht die Sichtbarkeitseinstellung von CollectionRole bzw. Collection
* [OPUSVIER-892] - Innere Knoten von Collections sollen auch zugeordnet werden können
* [OPUSVIER-931] - Abbrechen-Button bei der Sammlungs-Auswahl
* [OPUSVIER-932] - nach erfolgreichem publish-Vorgang kein redirect auf Schritt 1
* [OPUSVIER-943] - Aufnahme der Lizenzen in die Standardauslieferung
* [OPUSVIER-958] - Fehler beim Auswählen einer neu angelegten Collection beim Publish
* [OPUSVIER-961] - Heraustrennung der distributionsspezifischen Teile aus Install-/Uninstall-Skript
* [OPUSVIER-962] - Anpassung in .htaccess durch Install-Skript unter Debian/Ubuntu
* [OPUSVIER-965] - RewriteRule für die Weiterleitung von alten auf neue OPUS-IDs
* [OPUSVIER-981] - Referenzierung der Subjects in solr.xslt ändern
* [OPUSVIER-1019] - Opus_Document aus Session entfernen?
* [OPUSVIER-1023] - Default-Wert für "mehrwertige" Felder
* [OPUSVIER-1044] - Dokumentation des value-Parameters
* [OPUSVIER-1045] - Defaultwerte für "implizite" Unterfelder
* [OPUSVIER-1047] - Anzeige der zuvor ausgewählten Collection im 3. Formularschritt
* [OPUSVIER-1055] - Migration von noch nicht veröffentlichten Dokumenten
* [OPUSVIER-1063] - OAI-Parameter ergänzen
* [OPUSVIER-1068] - Filemanager dokumentieren
* [OPUSVIER-1075] - Definition von eigenen Select-Feldern
* [OPUSVIER-1077] - Hinweis zur Apache-Konfiguration
* [OPUSVIER-1078] - Weiterer Hinweis zur PHP-Konfiguration in php.ini

h2. ======================== Release 4.0.2 2010-12-22 ========================

h3. Änderungen

* Erfassung von Änderungen in CHANGES.txt in Tarball

h3. Behobene Fehler

* Fehler behoben, der dafür sorgte, daß beim Freischalten bzw. Ablehnen
eines Dokumentes die Zuordnung dieses Dokumentes zu Collections verloren ging.
Issue #OPUSVIER-863 - Beim hochladen von Dateien gehen die zugeordneten
Collections verloren

* Für 'PageFirst', 'PageLast' und 'PageNumber' eine spezielle Behandlung in den
FormBuilder eingebaut, die bei leeren Eingabefeldern, diese Werte auf 'null'
setzt, um zu verhindern, das einmal gesetzte Felder auch nach dem entfernen der
Werte in der Frontdoor mit dem Wert '0' auftauchen.
Issue #OPUSVIER-924 - Nach dem Löschen von Seiten Einträgen im
Metadaten-Formular erscheint '0' als Wert

h2. ======================== Release 4.0.1 2010-11-26 ========================

* Layout/CSS Änderungen

* Opus3-Import

* Migration OPUS 3.x

* Fehlende Übersetzungseinträge wurden hinzugefügt

* Korrekte Validierung von Passwörtern in Eingabeformularen im Account
und im Admin Modul

* FormBuilder geändert um bei uninitialisierten Modelinstancen
Exceptions zu verhindern


